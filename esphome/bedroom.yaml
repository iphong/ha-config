substitutions:
  name: bedroom
  area: Bedroom

<<: !include share/common.yaml

wifi:
  <<: !include share/wifi.yaml

esphome:
  <<: !include share/esp8285.yaml

status_led:
  pin:
    number: 13
    inverted: true

binary_sensor:
#  - platform: template
#    name:  ${area} Motion
#    device_class: motion
#    lambda: |-
#      // if (id(motion_1).state == true || id(motion_2).state == true) {
#      if (id(motion_1).state) {
#        return true;
#      } else {
#        return false;
#      }

#  - platform: homeassistant
#    id: motion_2
#    entity_id: binary_sensor.balcony_motion
#    device_class: motion
    
  - platform: homeassistant
    id: motion_1
    name: ${area} Motion
    entity_id: binary_sensor.wyzesense_778c0ea5
    device_class: motion

  - platform: homeassistant
    id: door_1
    name: ${area} Door
    entity_id: binary_sensor.wyzesense_777ef4c8
    device_class: door
  
  - platform: gpio
    pin:
      number: 0 # button pin
      inverted: true
    name: ${area} Button
    internal: true
    on_press: {}

power_supply:
  
  - id: psu_1
    enable_time: 20ms
    keep_on_time: 5s
    pin: 12 # relay pin

output:
  
  - platform: esp8266_pwm
    id: output_1
    pin: 1 # tx pin
    power_supply: psu_1
    frequency: 100hz
  
  - platform: esp8266_pwm
    id: output_2
    pin: 3 # rx pin
    power_supply: psu_1
    frequency: 100hz

light:
  
  - platform: cwww
    id: light_1
    name: ${area} Light
    cold_white: output_1
    warm_white: output_2
    cold_white_color_temperature: 6000 K
    warm_white_color_temperature: 3000 K


